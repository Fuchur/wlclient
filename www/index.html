<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="format-detection" content="telephone=no" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- to avoid the warning of content security policy -->
  <!--meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'"/-->

<script>
  // fix wp8 view port issue, see:
  // https://github.com/floatinghotpot/cordova-admob-pro/issues/109
  // https://coderwall.com/p/zk_2la/responsive-design-in-ie-10-on-windows-phone-8
  // http://stackoverflow.com/questions/24007577/windows-phone-8-viewport-issue
(function() {
  if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile\/10\.0/)) {
    var msViewportStyle = document.createElement("style");
    msViewportStyle.appendChild(
      document.createTextNode("@-ms-viewport{width:auto!important}")
    );
    document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
  }
})();
</script>

  <script src="socket.io/socket.io.js"></script>
  <!--script src="js/jquery-1.12.0.min.js"></script-->
  <script src="js/jquery-1.12.4.min.js"></script>
  <script src="js/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="css/jquery-ui.min.css">
  <script src='js/underscore-min.js'></script>
  <script src="js/jquery.cookie.js"></script>
  <script src="js/ansi_up.js"></script>
  <link rel="stylesheet" href="css/lightbox.css">
  <script src="js/lightbox.js"></script>
  <link rel="stylesheet" href="css/dropdown.css">
  <script src="js/dropdown.js"></script>
  <script src="js/client.js"></script>
  <script src="js/handle_gmcp.js"></script>
  <link rel="stylesheet" href="css/client.css"/>
  <title>WL@Web</title>
  <script>
  // Handle image loading errors here!
  function bildstoerung(){
    var img_a = $('a#room_image_a');
    var img = $('img#room_image');
    var brokenPath = img.attr('src');
    if(brokenPath!='img/aaa_no_signal.jpg') {
      img.attr('src', 'img/aaa_no_signal.jpg');
      img.attr('alt', 'Bildstoerung: ' + brokenPath + ' is broken!');
      img_a.attr('href', 'img/aaa_no_signal.jpg');
      img_a.attr('data-title', 'Bildstoerung: ' + brokenPath + ' is broken!');
    }
  }
  </script>
  <script>
  // Handle window close
  var isConnected = false;

  window.onbeforeunload = function (e) {
    if (isConnected) {
      e.preventDefault();
    }
  };

  function connected() {
    isConnected = true; 
    //alert('Connected!');
  }

  function disconnected() {
    isConnected = false;
    //alert('Disonnected!');
    //document.getElementById("cmd").innerHTML = "<span style='font-style: italic; color: #00FF00;'>Disconnected.</span><br>";
  }
  </script>
  <script>
  $( function() {
    $( "#infoDialog" ).dialog({
      modal: true,
      autoOpen: false,
      buttons: {
        Ok: function() {
          $(this).dialog("close");
        }
      }

//      autoOpen: false,
//      show: {
//        effect: "blind",
//        duration: 1000
//      },
//      hide: {
//        effect: "explode",
//        duration: 1000
//      }
    });
  });
  </script>
</head>

<body onclick="document.getElementById('cmd').focus();">
  <div id="page">
    <div id="out"></div>
    <div id="info">
      <p><span class="info_heading" id="room_name">--== Bildstoerung ==--</span></p>
      <a id="room_image_a" href="img/aaa_no_signal.jpg" data-lightbox="Images" data-title="--== Bildstoerung ==--">
        <img id="room_image" src="img/aaa_no_signal.jpg" onerror="bildstoerung();" alt="Bildstoerung" style="width:100%;height:auto;">
      </a>
      <p>
      <div class="rTbl" style="margin:0 auto;">
        <div class="rTblRow">
          <div class="rTblCell" style="width:10em;text-align:right;">Erfahrung:</div>
          <div class="rTblCell" style="width:10em;"><span class="info" id="xp">?</span></div>
        </div>
        <div class="rTblRow">
          <div class="rTblCell" style="text-align:right;">Leben:</div>
          <div class="rTblCell"><span class="info" id="hp">?</span>/<span class="info" id="max_hp">?</span></div>
        </div>
        <div class="rTblRow">
          <div class="rTblCell" style="text-align:right;">Magie:</div>
          <div class="rTblCell"><span class="info" id="sp">?</span>/<span class="info" id="max_sp">?</span></div>
        </div>
        <div class="rTblRow">
          <div class="rTblCell" style="text-align:right;">Abenteuer:</div>
          <div class="rTblCell"><span class="info" id="questpoints">?</span>/<span class="info" id="max_questpoints">?</span></div>
        </div>
        <div class="rTblRow">
          <div class="rTblCell" style="text-align:right;">Vorsicht:</div>
          <div class="rTblCell"><span class="info" id="wimpy">?</span></div>
        </div>
        <div class="rTblRow">
          <div class="rTblCell" style="text-align:right;">Fluchtrichtung:</div>
          <div class="rTblCell"><span class="info" id="wimpy_dir">?</span></div>
        </div>
      </div>
      </p>
      <div class="rTbl" style="margin:0 auto;">
        <div class="rTblRow">
          <div class="rTblCell" style="width:5em;text-align:center;">I: <span class="info" id="int">?</span></div>
          <div class="rTblCell" style="width:5em;text-align:center;">K: <span class="info" id="str">?</span></div>
          <div class="rTblCell" style="width:5em;text-align:center;">G: <span class="info" id="dex">?</span></div>
          <div class="rTblCell" style="width:5em;text-align:center;">A: <span class="info" id="con">?</span></div>
        </div>
      </div>
    </div>
    <div id="in">
      <input id='cmd' type="text" value="" autofocus><button id='send' class='cmd I18N' i18n='send'>Senden</button>
      <div id='menu' class="dropdown">
        <button onclick="dropDownFunction()" class="dropbtn">...</button>
        <div id="myDropdown" class="dropdown-content">
          <button id='who' class='cmd I18N' i18n='who'>wer</button>
          <button id='look' class='cmd I18N' i18n='look'>schau</button>
          <button id='inv' class='cmd I18N' i18n='inv'>inventar</button>
          <button id='score' class='cmd I18N' i18n='score'>info</button>
          <div>
            <button id='up' class='cmd I18N' i18n='up'>oben</button>
            <div style='position:relative;height:25px'>
              <button id='north' class='cmd I18N' i18n='n' style='position:absolute;left:0%;top:0%;width:23%;padding:0px;'>n</button>
              <button id='south' class='cmd I18N' i18n='s' style='position:absolute;left:25%;top:0%;width:23%;padding:0px;'>s</button>
              <button id='east' class='cmd I18N' i18n='e' style='position:absolute;left:50%;top:0%;width:23%;padding:0px;'>o</button>
              <button id='west' class='cmd I18N' i18n='w' style='position:absolute;left:75%;top:0%;width:23%;padding:0px;'>w</button>
            </div>
            <button id='down' class='cmd I18N' i18n='down'>unten</button>          
          </div>
          <button id='clear' class='cmd I18N' i18n='clear'>[Anzeige l√∂schen]</button>
        </div>
      </div>
    </div>
  </div>

  <div id="infoDialog" title="Information!" style="display:none;">
    <p>Das ist ein Informationsdialog.</p>
  </div>

</body>
</html>
